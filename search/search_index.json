{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"documentation/","title":"Documentations","text":""},{"location":"documentation/#compatiblites","title":"Compatiblit\u00e9s","text":"<p>Important<p>Okovision est compatible uniquement avec le Firmware Oekofen et Paradigma V2 et V3.</p> </p>   <p>Warning<p>Okovision n'est plus developp\u00e9. Aucune compatibilit\u00e9 avec le Firmware V4 n'est possible </p> </p>"},{"location":"documentation/#le-mot-de-lauteur","title":"Le mot de l'auteur","text":""},{"location":"documentation/#qui-suis-je","title":"Qui suis je ?","text":"<p>Je suis un heureux possesseur d'une Oekofen Pellomatic.</p>"},{"location":"documentation/#histoire-okovision","title":"Histoire Okovision","text":"<p>La chaudi\u00e8re en \u00e9tait capable, je l'ai immediatement reli\u00e9 \u00e0 mon r\u00e9seau domestique. J'ai ainsi pu commencer \u00e0 explorer tout ce que je pouvais faire avec. Dans un premier temps, afin de mieux me permettre de r\u00e9gler tous les param\u00e8tres de la chaudi\u00e8re et de mesurer leurs impacts sur les courbes, la gestion de la puissance, etc, j'ai \u00e9cris des macro excel pour traiter les CSV. </p> <p>Tr\u00e8s vite, il me fallait quelque chose d'automatis\u00e9 et qui allait me demander quasi aucune intervention. </p> <p>Je me suis donc lanc\u00e9 dans le developpement d'une application de type \"Web\" (backend : PHP, et frontend : Boostrap + Jquery)</p> <p>J'ai pass\u00e9 de nombreuses heures \u00e0 developper <code>okovision</code> pour mes besoins personnels. Le systeme d'okovision \u00e9tait, avant les Version V4, assez simple. J'ai pu ainsi developper une interface graphique pour mettre en forme toutes les donn\u00e9es produites par la chaudi\u00e8re via les exports CSV, mais aussi de pouvoir lui envoyer des commandes de configuration permettant ainsi d'historiser les configurations pour la r\u00e9gler aux petits oignons (je suis assez fi\u00e8re de cette fonctionnalit\u00e9 \ud83d\ude0e) Apr\u00e8s de nombreux echanges avec des utilisateurs via des forums, j'ai rajout\u00e9 des fonctionnalit\u00e9s diverses pour repondre \u00e0 leurs besoins (comme l'apprentissage de chaque configuration via une matrice de correspondance)</p>"},{"location":"documentation/#le-bilan","title":"Le Bilan","text":"<p><code>Okovision</code> a \u00e9t\u00e9 un bon Use Case.</p> <p>J'ai \u00e9t\u00e9 au debut de ma vie professionnel developpeur, mais ce n'est plus mon metier principale.</p> <ul> <li>Le PHP m'a permis de mettre en place facilement quelque chose<ul> <li>meme avec tous les defauts que ce langage peut avoir.</li> <li>Mon code devait pouvoir etre h\u00e9berg\u00e9 sur des h\u00e9bergeurs grand public (1and1, ovh, etc), PHP etait le language le plus repandu.</li> </ul> </li> <li>Le code n'est bas\u00e9 sur aucun framework. C'\u00e9tait un choix car je voulais que cela soit simple et l\u00e9g\u00e9 a install\u00e9 sans avoir de connaissance particuli\u00e8re<ul> <li>Ceci dit, nous avons atteint les limites de l'exercice, car si je veux encore l'am\u00e9liorer, il me faudra passer par un framework</li> </ul> </li> <li>Avec le recul, la structure du code n'est pas optimale. Ceci est vrai pour tout code que l'on produit, on peut toujours faire mieux \ud83d\ude09</li> <li>il reste encores quelques petites fonctionnalit\u00e9s \u00e0 mettre en place (comme la purge des donn\u00e9es journali\u00e8re pour allerger la base de donn\u00e9e)</li> <li>Maintenir un code qui doit toujours marcher n'est pas simple, car les versions php, mariadb, et autre evoluent, il faut toujours mettre \u00e0 jour afin que les nouveaux utilisateurs puissent en profiter. Cela demande du temps, beaucoup de temps</li> </ul>"},{"location":"documentation/#pourquoi-il-ny-aura-jamais-dokovision-v2-compatile-firmware-v4","title":"Pourquoi il n'y aura jamais d'okovision V2 compatile Firmware v4","text":"<p>Plusieurs raisons :</p> <ul> <li>Il n'est plus possible d'extraire le CSV directement depuis la chaudi\u00e8re. Les fichiers sont maintenant directement envoy\u00e9s sur un stockage externe g\u00e9r\u00e9 oekofen (ou un pr\u00e9stataire)</li> <li>Il faut donc mettre en place une application web disponible sur internet afin que les utilisateurs puissent s'inscrire sans avoir \u00e0 installer quoi que ce soit (Modele d'application de type SaaS)<ul> <li>Suite a un POC, je pu constat\u00e9 que j'etait en capacit\u00e9 de recolt\u00e9 l'ensemble des donn\u00e9es de toutes les chaudi\u00e8res okofen connect\u00e9s sur internet sans avoir besoin de l'accord des propri\u00e9taire ni du constructeur. Cela pose une question de s\u00e9curit\u00e9 du cot\u00e9 d'okofen.</li> </ul> </li> <li>Pour comprendre comment les chaudi\u00e8res fonctionnent \u00e0 partir de la Version 4, j'ai \u00e9t\u00e9 oblig\u00e9 de faire du Reverse Ingeniering. Cela veut dire decompiler le Firmware pour lire le code. Ce que j'ai fait. J'ai pu ainsi comprend l'ensemble de l'architecture qu'okofen a mis en place pour recueillir les donn\u00e9es de toutes les chaudi\u00e8res, et proposer leurs services aux travers de my.okofen.info<ul> <li>En faisant cela, je me met dans l'illegalit\u00e9. Car je n'ai pas demand\u00e9 l'accord d'oekofen de lire leur code source. Donc n'ayant aucun partenariat de developpement avec eux, je ne vais pas passer de du temps personnel pour developper une plateforme SaaS qui se base sur un acte ill\u00e9gale au regard du droit de la propri\u00e9t\u00e9</li> <li>De plus, comme je le disais, il faut que cela soit simple pour que tous les utilisateurs puissent utiliser <code>Okovision</code>. Et au regard des \"connexions\" qu'il faut faire avec le SI d'oekofen, cela n'est vraiment pas \u00e0 la porter de tout le monde. D'o\u00f9 mon id\u00e9e de d\u00e9part : de le proposer au travers d'une Plateforme / Application SaaS</li> </ul> </li> <li>le modele \u00e9conomique n'est pas viable : En effet, je porterai les co\u00fbts d'infrastructure, car il faut mettre en place pas mal de chose pour que cela fonctionne et puisse grandir avec des utilisateurs qui viendrait s'inscrire (m\u00eame avec un hebergement Cloud type Azure ou AWS). Donc la question est : Les utilisateurs seront-ils pret \u00e0 payer pour ce service ? je ne crois pas, ou tr\u00e8s peu d'entre eux / pas suffissement pour que cela soit viable<ul> <li>Dois-je passer du temps a developper une toute nouvelle plateforme pour pouvoir inclure les Firmware V4 ? en sachant que le modele \u00e9conomique n'est pas viable et que tout repose sur un acte illegale au regard du droit de la propri\u00e9t\u00e9</li> </ul> </li> </ul> <p>Au vu de toutes ces raisons, je ne vais pas me lancer dans Okovision V2 b\u00e9n\u00e9volement, car si Okofen d\u00e9cide de faire un developpement de leur cot\u00e9 equivalent \u00e0 okovision, changer l'architecture logicielle, changer les mots de passe, plus rien de marchera. Donc que de temps perdu pour moi.</p> <p>Pour toutes ces raisons, le developpement d'okovision est arret\u00e9 dans la version actuelle, car il repond \u00e0 mon besoin de suivre la consommation de granul\u00e9e de ma chaudi\u00e8re</p> <p>Merci \u00e0 tous ceux qui ont particip\u00e9 de pr\u00e8t et de loin.</p>"},{"location":"documentation/api/","title":"API - Interface de communication","text":"<p>Okovision dispose d'une API.</p> <p>Cela vous permet d'agir sur Okovision au travers de cette api sans passer par son interface graphique. Cela vous permet aussi d'agir sur votre directement sur chaudiere via cette api.</p>"},{"location":"documentation/api/#fonctionnement","title":"Fonctionnement","text":"<p>Important: Les appels sont des GET, et l'api retourne du Json</p> <p>Important: Vous devez fournir dans votre GET votre TOKEN-API (visible dans la page \"A propos\")</p> <p>Exemple de Requette :</p> <pre><code>curl http://okovision/api.php?token=sdjknrjkfndvjb&amp;type=admin&amp;action=getFileFromChaudiere\n</code></pre> <p>Reponse :</p> <pre><code>{\n  \"response\": true,\n  \"listefiles\": [\n    {\n      \"file\": \"touch_20160108.csv\",\n      \"url\": \"http://boiler/logfiles/pelletronic/touch_20160108.csv\"\n    },\n    {\n      \"file\": \"touch_20160109.csv\",\n      \"url\": \"http://boiler/logfiles/pelletronic/touch_20160109.csv\"\n    },\n    {\n      \"file\": \"touch_20160110.csv\",\n      \"url\": \"http://boiler/logfiles/pelletronic/touch_20160110.csv\"\n    },\n    {\n      \"file\": \"touch_20160111.csv\",\n      \"url\": \"http://boiler/logfiles/pelletronic/touch_20160111.csv\"\n    }\n  ]\n}\n</code></pre> <p>Exemple Requette :</p> <pre><code>curl http://okovision/api.php?token=sdjknrjkfndvjb&amp;type=rt&amp;action=setBoilerMode&amp;way=1&amp;mode=2\n</code></pre> <p>Reponse :</p> <pre><code>[\n  {\n    \"status\": \"OK\",\n    \"name\": \"CAPPL:LOCAL.hk[0].betriebsart[1]\",\n    \"value\": \"2\"\n  }\n]\n</code></pre> <p>Exmple Requette :</p> <pre><code>curl http://okovision/api.php?token=sdjknrjkfndvjb&amp;type=rendu&amp;action=getIndicByDay&amp;day=2015-12-22\n</code></pre> <p>Reponse :</p> <pre><code>{\n  \"consoPellet\": 22.25,\n  \"tcExtMax\": 12.8,\n  \"tcExtMin\": 7.3\n}\n</code></pre>"},{"location":"documentation/api/#lecture-de-la-documentation","title":"Lecture de la documentation","text":"<p>Par exemple <code>setBoilerMode</code></p> <pre><code>* rt :\n  * setBoilerMode (permet de forcer le mode d'un circuit)\n      * way : 0 / 1 / 2 / etc (numero du circuit)\n      * mode : 0 - arret / 1 - Auto / 2 - Confort / 3 - Reduit\n</code></pre> <p>il faut ecrire :</p> <pre><code>* type=rt\n* action=setBoilerMode\n* way=1 (si vous avez un seul circuit de chauffage, 1 sera toujours la valeur, si vous plusieur circuit, Aller dans l'interface web d'okofen, le numero du circuit de chauffage est precis\u00e9\n* mode=2 (ici force le mode Confort)\n</code></pre> <p>Important: Ne pas oublier de mettre le token, sinon la commande sera reject\u00e9</p> <pre><code>* token=sdjknrjkfndvjb  (mettre celui present dans la page \"A propos\" de votre okovision)\n</code></pre> <p>Le resultat</p> <pre><code>curl http://okovision/api.php?TOKEN=sdjknrjkfndvjb&amp;TYPE=rt&amp;ACTION=setBoilerMode&amp;WAY=1&amp;MODE=2\n</code></pre>"},{"location":"documentation/api/#liste-des-services-disponibles","title":"Liste des services disponibles","text":"<pre><code>* admin : \n   * getFileFromChaudiere\n   * getHeaderFromOkoCsv\n   * getSaisons\n   * checkUpdate\n   * getVersion\n\n* graphique :\n   * getCapteurs\n   * getGrapheAsso :\n      * id : fournir l'id du graphique (rendu.getGraphe)\n\n* rendu :\n   * getGraphe\n   * getGrapheData :\n      * id : id du graphique (rendu.getGraphe)\n      * day : jour voulu, format YYYY-MM-DD\n\n   *  getIndicByDay :\n      * day : jour voulu, format YYYY-MM-DD\n\n* rt :\n   * getBoilerMode (permet de connaitre le mode de fonctionnement d'un circuit de chauffage -&gt; Arret / Reduit / Confort / Auto) :\n      * way : 0 / 1 / 2 / etc (numero du circuit)\n\n   * setBoilerMode (permet de forcer le mode d'un circuit)\n      * way : 0 / 1 / 2 / etc (numero du circuit)\n      * mode : 0 - arret / 1 - Auto / 2 - Confort / 3 - Reduit\n</code></pre>"},{"location":"documentation/architecture/","title":"Architectures","text":""},{"location":"documentation/architecture/#okovision","title":"Okovision","text":""},{"location":"documentation/architecture/#chaudiere-oekofen-avec-myoekofeninfo","title":"Chaudi\u00e8re Oekofen avec My.oekofen.info","text":""},{"location":"documentation/configuration/info-generale/","title":"Informations g\u00e9n\u00e9rales","text":"<p>Warning</p> <p>Il faut etre authentifi\u00e9. Accessible dans le menu Informations G\u00e9n\u00e9rales</p>   <p>Important</p> <p>Vous choissisez le mode de r\u00e9cup\u00e9ration des donn\u00e9es de la chaudi\u00e8re (USB / IP)</p>  <p>Vous definissez :</p> <ul> <li>T\u00b0C de reference dans votre maison : Si vous avez un T\u00b0C r\u00e9duit \u00e0 19.5 et un confort \u00e0 20\u00b0C, vous faites la moyenne. Cette valeur permet de calculer les DJU (Degr\u00e9 jour unifi\u00e9) Elle vous permet d'avoir une valeur de comparaison en besoin \u00e9n\u00e9ergetique Mais vous pouvez choisir de mettre 20 pour etre en DJU 20 ou 18 pour etre en DJU 18</li> <li>Poids Pellet : Vous devez mesurer la quantit\u00e9 de pellet transmise par la vis tremis en 60 secondes.</li> <li>Surface Maison : Permet de calculer l'indicateur gr/dju/m2, et de l'utiliser comme indicateur de comparaison de votre installation</li> </ul>"},{"location":"documentation/configuration/livebox/","title":"Ouverture de sa Livebox orange","text":"<p>Important</p> <p>Ceci est vrai pour les Chaudiere Oekofen avec Firmware V2 et V3.</p> <p>Uniquement si vous hebergez okovision en dehors de votre reseau priv\u00e9 domestique</p>"},{"location":"documentation/configuration/livebox/#creer-un-nom-de-domaine-dynamique-avec-no-ip","title":"Cr\u00e9er un nom de domaine dynamique avec No-ip","text":"<p>Votre livebox (si vous n'avez pas une livebox pro) change d'adresse ip r\u00e9guli\u00e8rement. Cela n'est pas pratique. Alors orange \u00e0 impl\u00e9ment\u00e9 dans leur box un plugin permettant d'utiliser le service DynDns.</p> <p>Tout d'abord, allez sur le site https://www.noip.com/sign-up , cr\u00e9ez un compte. Si vous vous appelez <code>DUPOND</code>, vous pouvez demander un nom de domaine dynamique du style <code>dupond.ddns.net</code>.</p> <p>Dans le wiki, je le nommerai <code>dupond.ddns.net</code> et choisissez l'offre gratuite (free sign-up)</p> <p>Une fois le compte valid\u00e9 et cr\u00e9\u00e9, il vous faut param\u00e9trer la livebox</p>"},{"location":"documentation/configuration/livebox/#configurer-la-livebox-pour-le-service-no-ip","title":"Configurer la livebox pour le service no-ip","text":"<p>Loggez-vous sur votre livebox http://livebox.home/</p> <p>Aller dans le menu <code>Configuration avanc\u00e9e</code></p>  <p>puis \"DynDNS\"</p>  <ul> <li>Saisissez le nom du domaine que vous avez choisi (ici <code>dupond.ddns.net</code>)</li> <li>S\u00e9lectionnez le serice <code>no-ip</code></li> <li>Renseignez votre email et mot de passe que vous avez d\u00e9fini lors de l'inscription sur <code>noip.com</code></li> </ul>"},{"location":"documentation/configuration/livebox/#reperer-ladresse-ip-sur-votre-chaudiere","title":"Rep\u00e9rer l'adresse IP sur votre chaudiere","text":"<p>Voir la doc okofen. Je vous conseille de choisir l'option IP statique et pas DHCP sur la chaudi\u00e8re. En effet, dans le cas d'un coupure de courant, la chaudi\u00e8re red\u00e9marre + vite que la livebox et donc la livebox ne peut pas lui r\u00e9pondre pour lui donner un IP. Il est donc plus simple de fixer l'ip.</p> <p>Noter l'adresse ip de votre chaudi\u00e8re <code>exemple : 192.168.xxx.xxx</code></p> <p>ici le chaudi\u00e8re est PC30 (je le sais car j'ai \u00e9t\u00e9 voir l'ip directement sur la chaudi\u00e8re)</p>"},{"location":"documentation/configuration/livebox/#mise-sur-internet-de-votre-chaudiere-forwarding-de-port","title":"Mise sur internet de votre chaudi\u00e8re (Forwarding de port)","text":"<p>Votre nom de domaine <code>dupond.ddns.net</code> pointe sur votre livebox, donc sur rien. Pour rendre accessible votre chaudi\u00e8re \u00e0 partir de l'adresse <code>dupond.ddns.net</code>, vous devez indiquez \u00e0 la livebox de rediriger les flux (venant de l'exterieur) du port 80 de la livebox vers votre chaudi\u00e8re sur le port 80</p> <p>Attention: Vous pouvez choisir de mettre n'importe quel port (sup\u00e9rieur \u00e0 1024) de la livevox vers le 80, mais en fonction de l'hebergeur que vous avez choisi, il est possible que vous soyez contraint de faire 80 -&gt; 80 ou 8080 -&gt; 80</p> <p>Allez sur NAT/PAT</p>  <p>choisissez le service <code>web server http</code></p> <pre><code>port interne: 80\nport externe: 80 ou 8080\nprotocole: TCP\nappareil: soit il est dans la liste, soit vous saisissez son adresse IP\n</code></pre> <p>et vous enregistrez.</p>  <p>si tout va bien, il doit appara\u00eetre dans la liste des services</p>"},{"location":"documentation/configuration/livebox/#tester-le-bon-fonctionnement","title":"Tester le bon fonctionnement","text":"<p>Depuis chez vous (votre connexion internet) vous ne pourrez pas tester ce qui vient d'\u00eatre mis en place. Par contre, si vous avez un t\u00e9l\u00e9phone portable en 3g ou 4g, vous pouvez faire le test. En allant \u00e0 l'adresse ddns que vous avez choisi (dans notre exemple dupond.ddns.net) vous devriez voir la page de login de la chaudi\u00e8re.</p>   <p>Note</p> <p>Si tout est OK, dans <code>Okovision</code>, vous indiquez dans <code>Informations g\u00e9n\u00e9rales</code> que l'adresse ip est <code>dupond.ddns.net</code> (ceci est un exemple bien \u00e9videment)</p>"},{"location":"documentation/configuration/login/","title":"Acc\u00e8s espace s\u00e9curis\u00e9","text":"<p>Les accc\u00e8s aux menu de configuration sont prot\u00e9g\u00e9s.</p> <pre><code>login: admin\npassword: okouser\n</code></pre>"},{"location":"documentation/configuration/manage-graphics/","title":"Cr\u00e9ation / Gestion des graphiques journaliers","text":"<p>Warning</p> <p>Il faut etre authentifi\u00e9. Accessible dans le menu Gestion rapports journaliers</p>"},{"location":"documentation/configuration/manage-graphics/#creation-dun-graphique","title":"Creation d'un graphique","text":"<p>Choix du nom du graphique</p>  <p>Information: Vous pouvez cr\u00e9er autant de graphique que vous le voulez. Ils seront tous visibles sur la page d'accueil d'Okovision.</p>"},{"location":"documentation/configuration/manage-graphics/#ajout-des-capteurs-au-graphique","title":"Ajout des capteurs au graphique","text":"<p>Selectionner le graphique avec la liste <code>FILTRE</code></p>  <p>Cliquer sur <code>Ajouter</code>, cette fenetre vous permet de choisir le capteur et de lui appliquer un coefficient correcteur (pour mettre sur la m\u00eame echelle les donn\u00e9es si besoin)</p> <p>Recommencer la manipulation jusqu'\u00e0 obtention du graphique d\u00e9sir\u00e9.</p>"},{"location":"documentation/configuration/manage-graphics/#modifier-la-position","title":"Modifier la position","text":""},{"location":"documentation/configuration/manage-graphics/#visualisation-des-donnees","title":"Visualisation des donn\u00e9es","text":"<p>Apr\u00e8s avoir inject\u00e9 les donn\u00e9es dans okovision, vous pouvez les visualiser sur la premi\u00e8re page</p>"},{"location":"documentation/configuration/rt/","title":"Temps R\u00e9el","text":"<p>Note</p> <p>Au travers de cette section, vous pourrez visualiser les informations en temps r\u00e9el de votre chaudi\u00e8re.</p> <p>Vous pouvez les modifier, et aussi les sauvegarder.</p>"},{"location":"documentation/configuration/rt/#visualisation-et-modification-des-parametres-de-votre-chaudiere","title":"Visualisation et modification des param\u00eatres de votre chaudi\u00e8re","text":"<p>Tout d'abord, vous devez renseigner le login /mot de passe que vous utiliser pour vous connecter sur l'interface graphique web de votre chaudi\u00e8re.</p> <p>cliquez sur l'icone suivante :</p> <p> et aller sur le menu <code>Temps R\u00e9\u00e8l</code></p> <p>Okovision pourra se connecter \u00e0 votre chaudi\u00e8re et r\u00e9cuperer toutes les informations necessaires.</p>  <p>Il vous est possible de modifier chaque param\u00eatre</p>  <p>Chaque param\u00eatres modifi\u00e9s ne sera appliqu\u00e9s sur la chaudi\u00e8re que s'il est sauvegard\u00e9</p>  <p>Saisissez une d\u00e9scription (ce texte apparaitra sur les graphiques journaliers)</p>  <p>Il vous est aussi possible de voir les courbes des graphes que vous avez cr\u00e9\u00e9 en temps r\u00e9el.</p>"},{"location":"documentation/configuration/season/","title":"Cr\u00e9ation des saisons","text":"<p>Warning</p> <p>Il faut etre authentifi\u00e9. Accessible dans le menu Saisons</p> <p>La cr\u00e9ation des saisons est n\u00e9c\u00e9ssaire pour la g\u00e9n\u00e9ration des graphiques de synth\u00e8se.</p>  <p>Vous saisissez le premier jour de votre saison. Dans l'exemple c'est le 01 septembre, mais vous faites comme vous voulez.</p>"},{"location":"documentation/configuration/setup/","title":"Setup","text":""},{"location":"documentation/configuration/setup/#configuration-connexion-a-la-base-de-donnee","title":"Configuration / Connexion \u00e0 la base de donn\u00e9e","text":"<ul> <li>Si vous \u00eates sous windows et que vous avez suivi le tuto, mettre localhost, root/root (comme dans l'image ci-dessous).</li> <li>Si vous \u00eates sous rpi/linux, localhost, pour usr / mot de passe, c'est vous qui savez.</li> <li>Si vous \u00eates sur Nas Synology, mettre localhost, user : root et pas de mot de passe (par default c'est comme cela)</li> </ul>  <p>Si tout est Ok vous aurez ce petit bandeau :</p>"},{"location":"documentation/configuration/setup/#mode-de-recuperation-des-fichiers-csv","title":"Mode de recuperation des fichiers CSV","text":"<p>Si votre chaudi\u00e8re est connect\u00e9e \u00e0 votre r\u00e9seau informatique, indiquer son ip (vous pourrez la changer plus tard via la menu de configuration)</p>  <p>Note</p> <p>Si vous avez utiliser un hebergement exterieur, voir le chapitre detaill\u00e9  Configurer sa box pour rendre accessible la chaudiere depuis internet</p> <p>Sinon, choisissez USB, ainsi vous pourrez transferez manuellement les fichiers recuper\u00e9s.</p>"},{"location":"documentation/configuration/setup/#parametrage-specifique-a-votre-installation","title":"Param\u00e9trage sp\u00e9cifique \u00e0 votre installation","text":""},{"location":"documentation/configuration/setup/#matrice-de-lecture","title":"Matrice de lecture","text":"<p>Note: Cette \u00e9tape est primoridale et obligatoire</p>"},{"location":"documentation/configuration/setup/#apprentissage-de-tous-les-capteurs-presents-sur-votre-chaudiere","title":"Apprentissage de tous les capteurs pr\u00e9sents sur votre chaudiere","text":"<p>Chaque installation de chaudi\u00e8re est differentes (ecs ou non, plancher chauffant ou non, ballon tampon ou non, solaire ou non, etc, etc etc).</p>  <p>Note</p> <p>Okovision peu tout g\u00e9rer, mais il faut lui faire connaitre votre installation.</p> <p>Il faut lui fournir un fichier csv g\u00e9n\u00e9r\u00e9 par la chaudiere. </p> <p>Ainsi Okovison va l'analyser et fini de l'installation</p>  <p>Okovision dispose d'un dictionnaire, ainsi les noms des capteurs, circuits ont \u00e9t\u00e9 traduit en Fran\u00e7ais</p>  <p>Important</p> <p>Apr\u00e8s vous etes identifi\u00e9, Rendez vous sur la page Matrice de lecture CSV</p>   <p>Choix du fichier csv produit par votre chaudi\u00e8re que vous avez depos\u00e9 sur votre PC</p>  <p>Upload de votre fichier dans okovision</p>"},{"location":"documentation/configuration/setup/#apprentissage-termine","title":"Apprentissage termin\u00e9","text":"<p>Quand okovision a termin\u00e9 son analyse, la structure finale est affich\u00e9e.</p> <p>Vous retrouverez la liste de tous ces capteurs dans Cr\u00e9ation / Gestion des graphiques journaliers</p>"},{"location":"documentation/configuration/synthese/","title":"Synth\u00e8se journali\u00e8re","text":"<p>Warning<p>Il faut etre authentifi\u00e9. Accessible dans le menu Calcul Synth\u00e8se journali\u00e8re</p> </p>"},{"location":"documentation/configuration/synthese/#calculer-la-synthese-si-vous-avez-fait-des-imports-manuelles","title":"Calculer la synthese si vous avez fait des imports manuelles","text":"<p>Cliquer sur les jours que vous souhaitez unitairement ou sur <code>Calculer toutes les synth\u00e8ses</code></p>"},{"location":"documentation/configuration/synthese/#recalculer-un-essemble-de-synthese-journaliere","title":"Recalculer un essemble de synthese journali\u00e8re","text":"<p>Si vous avez modifi\u00e9 des \u00e9l\u00e9ments dans la configuration g\u00e9n\u00e9rale (T\u00b0C, Poids Pellet), ces nouveaux \u00e9l\u00e9ments sont pris en compte pour les synth\u00e8ses futurs.</p> <p>Note: Si vous voulez appliquer ces changements pour des jours precedent, vous devez recalculer la synth\u00e8se.</p>  <p>vous pouvez le faire en cliquant sur le calendrier et en precisant la plage de recalcul.</p>"},{"location":"documentation/configuration/update-matrix/","title":"Gestion de la Matrice","text":"<p>Warning</p> <p>Il faut etre authentifi\u00e9. Accessible dans le menu MAtrice de lecteure CSV</p>   <p>Note</p> <p>La suppression de la matrice ne supprime pas les donn\u00e9es, mais vous ne pourrez plus en ajouter tant que vous n'en avez pas r\u00e9cr\u00e9\u00e9 une</p>  <p>Si votre installation de chauffage change, par exemple pour :</p> <ul> <li>Ajout d'un nouveau circuit de chauffage</li> <li>Ajout de capteur solaire</li> <li>Mise a jour du firmware</li> </ul> <p>Le format du fichier CSV g\u00e9n\u00e9r\u00e9 par votre chaudi\u00e8re va etre modifi\u00e9.</p>  <p>Important</p> <p>L'importation des donn\u00e9es ne marchera plus si vous ne mettez pas la matrice \u00e0 jour</p>  <p> Cliquer sur l'icone de mise \u00e0 jour</p> <p>Re-importer un fichier CSV provenant de votre chaudi\u00e8re.</p>"},{"location":"documentation/configuration/update-matrix/#suppression-de-la-matrice","title":"Suppression de la matrice","text":"<p>Si vous avez eu un probleme lors de l'import d'un fichier CSV et que la matrice est incoh\u00e9rente.</p> <p>  Vous pouvez l'effacer en cliquant sur l'icone</p>  <p>Attention</p> <p>Toutes les donn\u00e9es journali\u00e8res seront supprim\u00e9es. Par contre, l'historique est conserv\u00e9e.</p>"},{"location":"documentation/configuration/update/","title":"Mise \u00e0 jour Okovision","text":"<p>Important</p> <p><code>Okovision</code> verifie automatiquement si des mises \u00e0 jour sont disponibles</p>   <p>Note</p> <p>Aller sur la page <code>A propos</code></p>  <p>Si cela est le cas, vous pourrez lancer la mise \u00e0 jour automatique. Vous n'avez rien d'autre \u00e0 faire.</p>"},{"location":"documentation/installation/linux/","title":"Linux","text":"<p>Information</p> <p>Okovision est compatible PHP5 et PHP7</p>  <p>Si vous avez un <code>rpi</code> ou un <code>serveur linux</code> chez vous, je pense sans me tromper que vous savez tr\u00e8s bien installer Apache + Mariadb (ou Mysql) + PHP. Je suis aussi sur que vous savez configurer un site sous apache.</p> <p>Je vous met le detail pour une configuration type. Cette exemple est pour un raspberry qui ne sera d\u00e9di\u00e9 qu'a okovision</p>"},{"location":"documentation/installation/linux/#installation-des-binaires","title":"Installation des binaires","text":""},{"location":"documentation/installation/linux/#installation-base-de-donnee","title":"Installation Base de donn\u00e9e","text":"<pre><code>sudo apt-get -y install mariadb-server\n</code></pre>"},{"location":"documentation/installation/linux/#configuration-base-de-donnee","title":"Configuration Base de donn\u00e9e","text":"<p>Creation de l'utilisateur <code>okouser</code> avec le password <code>okopass</code></p> <pre><code>sudo mysql -e \"CREATE USER 'okouser'@'localhost' IDENTIFIED BY 'okopass';\"\nsudo mysql -e \"GRANT ALL PRIVILEGES ON *.* TO 'okouser'@'localhost' ;\"\n</code></pre>"},{"location":"documentation/installation/linux/#installation-apache","title":"Installation Apache","text":"<pre><code>sudo apt-get -y install apache2\nsystemctl enable apache2\n</code></pre>"},{"location":"documentation/installation/linux/#installation-php","title":"Installation PHP","text":"<pre><code>sudo apt-get -y install software-properties-common python-software-properties\nsudo add-apt-repository -y ppa:ondrej/php\nsudo apt-get update\nsudo apt-get -y install php7.2 php7.2-cli php7.2-common\nsudo apt-get -y install php7.2-curl php7.2-gd php7.2-json php7.2-mbstring php7.2-intl php7.2-mysql php7.2-xml php7.2-zip\n</code></pre>"},{"location":"documentation/installation/linux/#installation-des-sources-okovision","title":"Installation des sources Okovision","text":"<pre><code>cd /var/www/\nwget https://github.com/stawen/okovision/archive/master.zip\nunzip master.zip\nmv okovision-master/ okovision/\nrm master.zip\nchown www-data:www-data -R okovision/\n</code></pre>"},{"location":"documentation/installation/linux/#configuration-apache","title":"Configuration apache","text":"<pre><code>cp /var/www/okovision/install/099-okovision.conf /etc/apache2/sites-available/.\na2ensite 099-okovision.conf\na2dissite 000-default\nservice apache2 reload\n</code></pre>"},{"location":"documentation/installation/linux/#configuration-okovision","title":"Configuration okovision","text":"<p>Aller sur l'adresse ip du serveur linux / rpi et faites le setup okovision</p>"},{"location":"documentation/installation/linux/#cron-sous-linux","title":"Cron sous linux","text":"<p>Lancer l'editer des taches planifi\u00e9s Si premier lancement , choisissez Nano comme \u00e9diteur.</p> <pre><code>crontab -e\n</code></pre> <p>Inserer en fin de fichier cette ligne</p> <pre><code>22      */2     *       *       *       cd /var/www/okovision; /usr/bin/php -f cron.php \n</code></pre> <p>Faites <code>CTRL + X</code>, Puis confirmer l'enregistrement <code>Y</code></p>"},{"location":"documentation/installation/synology/","title":"Synology","text":"<p>Installer les packages MariaDb et activer le serveur web</p>  <p>Allez dans le repertoire Web</p>  <p>Creez un dossier \"okovision\"</p>  <p>Ouvrez l'archive de source d'okovision que vous venez de t\u00e9l\u00e9charger et copiez les dans le repertoire que vous venez de creer precedement</p>  <p>Dans le NAS, faites clic droit sur le repertoire \"okovision\", puis propri\u00e9t\u00e9s</p>  <p>Changez le propri\u00e9taire et appliquez pour les sous-repertoires</p>"},{"location":"documentation/installation/synology/#configuration-de-web-station-et-de-php","title":"Configuration de Web Station et de PHP","text":"<p>Note: Vous devez verifier que les modules PHP sont bien activ\u00e9s.</p>  <p>Ci-dessous, le liste des modules.</p> <p>   </p>"},{"location":"documentation/installation/synology/#acces-a-lapplication","title":"Acces \u00e0 l'application","text":"<p>Avec votre navigateur, accedez \u00e0 okovision <code>http://[ip]/okovision</code> (si vous avez la page de setup c'est tout bon)</p>"},{"location":"documentation/installation/synology/#cron-sous-nas-synology","title":"Cron sous Nas synology","text":"<p>Aller dans le plannificateur de taches</p>  <p>Creez une nouvelle entr\u00e9e avec les informations suivantes (a adapter pour les chemins)</p>   <p>ou</p> <pre><code>wget http://127.0.0.1/okovision/cron.php 1&gt;/dev/null 2&gt;/dev/null;\n</code></pre>"},{"location":"documentation/installation/synology/#recurrence-de-lexecution","title":"R\u00e9currence de l'execution","text":"<p>Important</p> <p>Vous devez faire executer votre script tous les 2 heures minimum. En dessous cela ne sert \u00e0 rien</p>"}]}